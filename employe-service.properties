server.port=8081

spring.datasource.driver-class-name=org.postgresql.Driver
spring.datasource.url=jdbc:postgresql://localhost:5432/employes
spring.datasource.username=postgres
spring.datasource.password=hamza
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true

# Resilience4j Circuit Breaker configuration
resilience4j.circuitbreaker.instances.employeServiceCircuitBreaker.sliding-window-size=5
resilience4j.circuitbreaker.instances.employeServiceCircuitBreaker.failure-rate-threshold=50
resilience4j.circuitbreaker.instances.employeServiceCircuitBreaker.wait-duration-in-open-state=10s
resilience4j.circuitbreaker.instances.employeServiceCircuitBreaker.permitted-number-of-calls-in-half-open-state=3

# Ignorer les exceptions métier (ne pas déclencher le fallback)
resilience4j.circuitbreaker.instances.employeServiceCircuitBreaker.ignore-exceptions=\
  com.emsi.employe_service.exception.EmployeNotFoundException,\
  java.lang.IllegalArgumentException

# Resilience4j Retry configuration
resilience4j.retry.instances.employeServiceRetry.max-attempts=3
resilience4j.retry.instances.employeServiceRetry.wait-duration=2s

# Ne pas réessayer pour les exceptions métier
resilience4j.retry.instances.employeServiceRetry.ignore-exceptions=\
  com.emsi.employe_service.exception.EmployeNotFoundException,\
  java.lang.IllegalArgumentException